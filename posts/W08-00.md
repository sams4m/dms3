---
title: üå† Fullstack JavaScript & Communities of Practice
published_at: 2025-05-01
snippet: Week 08 00
disable_html_sanitization: true
allow_math: true
---

<style>
  .markdown-body h1, .markdown-body h3 {font-weight: 300;}
  p {color:#3A6FD7;}

  .int-style {
  color:#1e1e1e;
  background-color:#ffffff;
  }
</style>

---

<button id="int-btn" class="rounded-md p-2 bg-transparent border border-primary text-foreground hover:#7d9fc0">Make Me Interesting üåßÔ∏è</button>

<script>
const intBtn = document.querySelector("#int-btn");
console.log(intBtn);

let interesting = flase;

intBtn.addEventListener("click", function () {
  console.log('button clicked');

  if (interesting === false){
    document.documentElement.classList.add('int-style');
    interesting = true;
  } if else {
    document.documentElement.classList.remove('int-style');
    interesting = false;
  }

});
</script>

---

# Homework

### 1. Upgrade your blog!

> Move the blog index to blog.tsx
> Modify the index.tsx file to be a landing page

> - clone¬†[this repo](https://github.com/capogreco/landing_page_example)¬†locally with:¬†git clone https://github.com/capogreco/landing_page_example ... and have a poke around for some clues

> You can find the Fresh documentation¬†[here](https://fresh.deno.dev/docs/concepts)
> You are also allowed to use AI assistance for this task
> Please document your trials and tribulations on your blog

As a starting point, I copied over the files from the landing page example to understand what was happening, and to also save myself time from the setting up process, since I did quite like the other features added in the new repo too.

I started by adjusting the colour themes, I adjusted the dark mode theme to be the "zany" colour theme and did the same with light mode and "cute", since they kind of are like two sides of the same coin. This process took a lot of trial and error using inspect to figure out what colours correlated to which element and what and where different text styling elements were coded in the files. I was eventually able to adjust all the necessary colour variables and text styles to fit both themes, adding he font I used in zany as a new global font and a new light theme css file too.

<div id="codeblock0"> </div>

<br></br>
From there I wen to work on the landing page. I actually really like the sinusoidal wave of squares that was done there, reminded me of a swirling DNA strand. I decided to build on top of that instead of completely scrapping it.
I started by adjusting it to make the squares into stars. I didn't really look into how to syntax worked though... kind of just adjusted and learnt as I went, assuming that it wouldn't be too different to regular js. This was also a trial and error process of checking the console log to see what was wrong and fix accordingly. I also adjusted the 'welcome' text (content and styling) in the middle of the screen, alongside adding an action text "click anywhere to enter."
For this, I used the help of ChatGPT to write "welcome to sam's blog." in old english.

<img src="/W08/00.jpeg" alt="00.jpeg" style="width:100%"/>

I'm not too big of a fan of using AI, but I thought I'd try incorporating it in this task.

<img src="/W08/00.gif" alt="00.gif" style="width:100%"/>

> Landing Page Version 0.

<div id="codeblock1"> </div>

<br></br>
From here I was wondering what could I do / create with this wave pattern, and how I could manipulate it to create something new. So I started playing around with the positioning and amplitude of the star wave, along with adding more instances of it.

<img src="/W08/01.gif" alt="01.gif" style="width:100%"/>

> Landing Page Version 1.

<div id="codeblock2"> </div>

I ended up with this version that I thought looked kind of like lace? And also the fact that that the instance of the stars up top reflected the same stars down bottom (that kind of looked like they were bouncing through the screen), but also in hindsight it made complete sense that the two instances reflected the same stars. Which was how I ended up adding another two instances so it looked more like the stars were jumping up and out from a running stream of stars up top and bottom of the screen.

<iframe src="https://sams4m-dms3-comm2747.deno.dev/" id="w08-00"></iframe>

> Landing Page Final Version.

<div id="codeblock3"> </div>

### 2. list 5 communities of practice (CoPs) you are a member of

> - list the domain, repertoire, and values of each CoP
> - list the domain, repertoire, and values of¬†*creative coding*

Domain: What is the problem they're trying to solve
Repertoire: the activity; behaviours of community and how you might identify them
values: what the community value

| Community                   | Domain                                                                                                                                                                                                                                                                                                                                                                                                         | Repertoire                                                                                                                                                                                                                                                                                                               | Values                                                                                                                                                                                                     |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Journalling                 | Finding a system to write; memory keeping, writing in general, prompt writing, planning etc. Usually the system of writing helps bring balance and comfort to life.                                                                                                                                                                                                                                            | usually has an artefact they bring everywhere with them, but also notebooks they keep at home. Also likes to keep bits and bops as a way to memory keep. Often likes to take the journal outdoors to explore and write/draw. <br>                                                                                        | very spiritual and often self reflecting a lot for ongoing self improvement, often has high appreciation for the tangible artefacts.<br>People into journalling often are very sentimental and reflective. |
| Fountain Pens               | Finding a pen that both is comfortable to write in (size, nib experience, transportability) and also brings joy aesthetically. Often also comes hand in hand with finding favourite ink(s) that fit the persons' needs practically and aesthetically.                                                                                                                                                          | Often also into journaling / writing/ drawing, very fond of tangible artefacts. Often has a favourite brand and is fond of other quality goods.                                                                                                                                                                          | has an appreciation for the tangible / analogue systems and writing. Often sentimental and nostalgic.                                                                                                      |
| Running                     | Broken down into a few categories of people:<br>- How to run efficiently to achieve a fast time (long and short distance); how to train for this and nutrition that goes with.<br><br>- How to improve their health; nutrition and exercise.                                                                                                                                                                   | some sort of smart watch and long run weekends. Often in athletic gear. Might attend local run club activities (personally do not)                                                                                                                                                                                       | Strives for work life balance, often very self betterment driven, a very encouraging community overall but can be very toxic online.                                                                       |
| Camping                     | What places there are to camp/explore? What gear is the best (budget or quality or both) for certain activities and what there is available with modern technology that may help improve the experience.                                                                                                                                                                                                       | having a box of gear on the go. Many opt for a 4wd car or bigger suv to fit their gear/car camp. Usually are very active in life (a fan of sports and such). May be constantly planning trips months in advance, or may plan a trip last minute/impulsively.                                                             | an appreciation for nature and outdoor activities, a lot more laid back and welcoming / friendly bunch                                                                                                     |
| Rabbit owner                | How can I provide proper care for the rabbit's physical, internal and nutritional health? What are new and efficient enrichment activities for bunnies? How can I keep the environment safe and fun for bunnies but also for the owner themselves?                                                                                                                                                             | fur everywhere, and house is built to accomodate the bunnies, very wary of certain foods due to bunnies health. Always seeking content to learn more about bunnies; their wellbeing and health.                                                                                                                          | Very mindful with attention to detail due to being owners of a prey animal.                                                                                                                                |
| f1 fandom                   | Who is going to win the seasons drivers championship and constructors championship? Who do we think is the best driver (for different reasons; driving style/performance or persona). Who is the best team on grid? (performance, build, drivers in the team etc)<br>What is the latest drama on grid? (driver swaps, penalties, changes in team etc)                                                          | merchandise, the f1 app and distinctive notification sound.<br>Often a fan of cars. Often will specifically wake up earlier/stay up late for races, or will catch back up the day later.                                                                                                                                 | could be either very nationalistic or strong sense of sportsmanship, but also just really into cars and entertainment from driving                                                                         |
| RMIT digital media students | How can I improve my creative practice; what skills can I learn and hone to do this?                                                                                                                                                                                                                                                                                                                           | RMIT student, discussing work with peers, joining weekly digital media classes/activities                                                                                                                                                                                                                                | all very passionate about some area of digital media and design                                                                                                                                            |
| Reading (fiction)           | What is the next best read/world to immerse ourselves into? What is a new genre or sub-genre that I can try?<br>What is the next solution to my stress?                                                                                                                                                                                                                                                        | most likely owns a kindle (or ebooks of some sort) and/ or physical books. Will allocate some time every week or day (depending on person) to read.                                                                                                                                                                      | An appreciation for imagination and creativity in the written form.<br>May use reading as a way to decompress and relax.                                                                                   |
| Music                       | What is next big thing? (song, album and artist)<br>Trying to find a song/album/artist/genre of music that really speaks to the listener (overall or in the moment).<br>What is the next solution to my stress?<br><br>For some to find people who have a similar taste / preferences in music.<br>Who is a new songs/artists that they resonate with to expand their listening category?                      | merchandise, most likely discussing on platforms like twitter and tiktok (tiktok is more popular with pop and kpop fans, twitter is still the favoured platform for metal and jpop)                                                                                                                                      | An appreciation and passion for music. May find solace in music, using it a way to decompress / set their mindset.                                                                                         |
| Genshin (RPG Game)          | Find out more of the lore.<br>Explore and learn everything there is about the current and new updates of the world.<br>Build characters to create the strongest team or strongest dps/sub dps/healer/support. <br>Collect characters people like.                                                                                                                                                              | merchandise, have the mihoyo app. most likely discussing on platforms like twitter and tikotk (or red note for those on a chinese platform). may also have the phone app to do daily quests or if they prefer playing via mobile app. May also cross over into the cosplaying community / attending related conventions. | An appreciation for RPG games heavy on world lore. May use gaming as a way to decompress and relax.                                                                                                        |
| uni friends                 | Seperate from other friend groups, uni friends usually are to keep on track of uni and to learn from and grow together as designers. <br>But also to seek ways to balance out the stress of uni; usually searching for fun (fun uni events, usually parties or clubbing)                                                                                                                                       | large portion are RMIT students, otherwise met through uni / uni friends, have shared hobbies / interests in life further than just being uni together. <br>A lot of the time the network grows through meeting a friend of a friend.                                                                                    | A strong sense of community and helping each other with not just uni but life in general.                                                                                                                  |
| Creative coding             | How to create a 'cool' thing; exploring different areas of creative coding.<br>Seeking out new ways to improve their practice and how they can incorporate and manipulate new techniques into their creative practice (usually seeking innovating ways to use these techniques, not necessarily for their intended use)<br>Finding ways to blend this into other areas, like 3D modelling, graphic design etc. | Coding language: Javascript, C#, C++ etc                                                                                                                                                                                                                                                                                 | A passion for coding and creating digital projects/objects. Very curious about the artefacts of the surrounding world                                                                                      |

### 3. brainstorm some ideas for your AT3.¬† In your discussion, refer

> - to the communities listed above
> - why these ideas might be interesting, with reference to Ngai's aesthetic registers

I think I want to do something to do with live coding. I am more of a lurker in a lot of these communities, not actively participating in interacting with others in this community but consuming the content related to these communities. I'm thinking To do something with uni friends who some are also a part of the RMIT digital media student community. I was thinking to do something of satirical nature to make a statement out of the mundane and mixing creative coding with a crowd that isn't necessarily in to creative coding. By doing this I was. hoping to evoke the interesting aesthetic register that is about the information of things, and the circulation of this information. Hitting a register of irony that visually is detached or clinical even.

Since the community of uni friends is usually rooted in fun, I though I could perhaps do a cross over between modern party/clubbing culture and creative coding and perhaps make a statement on how much party culture has evolved to become 'un-fun' in the modern day it is now through an ironic video of a live coding party.

---

<script type="module">
const iframe = document.getElementById (`w08-00`)
iframe.width = iframe.parentNode.scrollWidth
iframe.height = iframe.width * 9 / 16 + 42
</script>

<!-- CODEBLOCK RENDERERS -------------------------------------------------------------------------------------- -->

<script type="module">
import codeBlockRenderer from "/scripts/codeblock_renderer.js"
codeBlockRenderer (document, `lightcss`, `codeblock0`);
</script>

<script type="module">
import codeBlockRenderer from "/scripts/codeblock_renderer.js"
codeBlockRenderer (document, `landing1`, `codeblock1`);
</script>

<script type="module">
import codeBlockRenderer from "/scripts/codeblock_renderer.js"
codeBlockRenderer (document, `landing2`, `codeblock2`);
</script>

<script type="module">
import codeBlockRenderer from "/scripts/codeblock_renderer.js"
codeBlockRenderer (document, `landing3`, `codeblock3`);
</script>

<!-- VER 2 SCRIPT -------------------------------------------------------------------------------------------- -->

<script type="module" id="landing3">
import { useEffect, useRef } from "preact/hooks";
import ThemeToggle from "@/islands/ThemeToggle.tsx";

class SinuStar {
  private x_speed: number = 0;
  private y_rate: number = 0;
  private y_phase_offset: number = 0;
  private x_phase_offset: number = 0;
  private size: number = 0;
  private points: number = 0;
  private position: number = 0;

  constructor(
    x_speed: number,
    y_rate: number,
    x_phase: number,
    y_phase: number,
    points: number,
    position: number
  ) {
    this.x_speed = x_speed;
    this.y_rate = y_rate;
    this.x_phase_offset = x_phase;
    this.y_phase_offset = y_phase;
    this.size = 20;
    this.points = points;
    this.position = position;
  }

  draw(ctx: CanvasRenderingContext2D, t: number, col: string) {
    if (!ctx) return;
    const cnv = ctx.canvas;

    let starposa, starposb;

    // bottom wave
    if (this.position == 1) {
      starposa = cnv.height;
      starposb = cnv.height;
    }
    // top wave
    if (this.position == -1) {
      starposa = cnv.height;
      starposb = 0;
    }
    // bottom line
    if (this.position == 2) {
      starposa = 0;
      starposb = innerHeight - 20;
    }
    // top line
    else if (this.position == -2) {
      starposa = 0;
      starposb = 20;
    }

    const x_phase = (t * this.x_speed + this.x_phase_offset) % 1;
    const x_pos = (cnv.width + this.size) * x_phase - this.size;

    const y_phase = (t * this.y_rate * Math.PI * 2 + this.y_phase_offset) % 1;
    const y_sig = Math.sin(y_phase * Math.PI * 2);
    const y_wid = starposa / 3;
    const y_pos = starposb - this.size / 2 + y_sig * y_wid;

    //ctx.fillStyle = col;
    // ctx.fillRect(x_pos, y_pos, this.size, this.size);
    this.drawStar(
      ctx,
      x_pos + this.size / 2,
      y_pos + this.size / 2,
      this.points,
      this.size / 2,
      this.size / 4,
      col
    );
  }

  // draw star
  private drawStar(
    ctx: CanvasRenderingContext2D,
    cx: number,
    cy: number,
    points: number,
    r2: number,
    r1: number,
    col: string
  ) {
    ctx.beginPath();
    ctx.fillStyle = col;

    // start at the top point
    let step = Math.PI / points;

    for (let i = 0; i < points * 2; i++) {
      // if i / 2 = 0 draw outer radius point
      // if not draw inner radius point
      let radius = i % 2 === 0 ? r2 : r1;
      let x = cx + radius * Math.sin(i * step);
      let y = cy - radius * Math.cos(i * step);

      if (i === 0) {
        ctx.moveTo(x, y);
      } else {
        ctx.lineTo(x, y);
      }
    }

    ctx.closePath();
    ctx.fill();
  }
}

export default function LandingSketch() {
  const canvasRef = useRef<HTMLCanvasElement>(null);

  useEffect(() => {
    const cnv = canvasRef.current;
    if (!cnv) return;

    const resizeCanvas = () => {
      cnv.width = innerWidth;
      cnv.height = innerHeight;
    };

    resizeCanvas();
    globalThis.onresize = resizeCanvas;

    // Initialize animation
    const initAnimation = async () => {
      const ctx = cnv.getContext("2d");
      if (!ctx) return;

      // create stars
      const x_speed = 0.05;
      const y_rate = 0.01;

      // create regular stars
      const numStars = 36;
      // wave stars
      const starsA: SinuStar[] = [],
        starsB: SinuStar[] = [];
      // flat stars
      const starsC: SinuStar[] = [],
        starsD: SinuStar[] = [];
      for (let i = 0; i < numStars; i++) {
        const phase = i / numStars;
        const offset = (i % 3) / 3;
        const y_phase = phase + offset;
        const points = Math.floor(Math.random() * (9 - 4) + 4);
        // wave vars
        const positionA = 1,
          positionB = -1;
        // line vars
        const positionC = 2,
          positionD = -2;
        starsA.push(
          new SinuStar(x_speed, y_rate, phase, y_phase, points, positionA)
        );
        starsB.push(
          new SinuStar(x_speed, y_rate, phase, y_phase, points, positionB)
        );
        starsC.push(
          new SinuStar(x_speed, y_rate, phase, y_phase, points, positionC)
        );
        starsD.push(
          new SinuStar(x_speed, y_rate, phase, y_phase, points, positionD)
        );
      }

      const drawFrame = (ms: number) => {
        const bgColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-background")
          .trim();

        const fgColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-muted-foreground")
          .trim();

        const accentColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-landing")
          .trim();

        ctx.fillStyle = bgColour;
        ctx.fillRect(0, 0, cnv.width, cnv.height);

        const t = ms / 1000;

        // STARS --------------------------------------------------------------------
        starsA.forEach((s, i) => {
          const col = i === 0 ? accentColour : fgColour;
          s.draw(ctx, t, col);
        });

        starsB.forEach((s, i) => {
          const col = i === 0 ? accentColour : fgColour;
          s.draw(ctx, t, col);
        });

        starsC.forEach((s, i) => {
          const col = i === 0 ? accentColour : fgColour;
          s.draw(ctx, t, col);
        });

        starsD.forEach((s, i) => {
          const col = i === 0 ? accentColour : fgColour;
          s.draw(ctx, t, col);
        });

        // TEXT --------------------------------------------------------------------
        // center text
        ctx.fillStyle = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-foreground")
          .trim();
        ctx.font = `20px monospace`;
        ctx.textAlign = `center`;
        ctx.textBaseline = `middle`;
        ctx.font = `30px "prestige-elite-std"`;

        const text = `thou art arriv'd at sam's chronicle.`;
        ctx.fillText(text, cnv.width / 2, cnv.height / 2);

        // click to enter text
        ctx.fillStyle = fgColour;
        ctx.font = `20px "prestige-elite-std"`;
        const text2 = `click anywhere to enter.`;
        ctx.fillText(text2, cnv.width / 2, cnv.height - 40);

        requestAnimationFrame(drawFrame);
      };

      requestAnimationFrame(drawFrame);
    };

    document.fonts.ready.then(() => initAnimation());

    // Cleanup
    return () => {
      globalThis.onresize = null;
    };
  }, []);

  return (
    <div style={{ position: "relative", width: "100%", height: "100vh" }}>
      <canvas ref={canvasRef}></canvas>
      <div
        style={{
          position: "absolute",
          bottom: "1rem",
          right: "1rem",
          zIndex: 20,
        }}
      >
        <ThemeToggle />
      </div>
    </div>
  );
}

</script>

<!-- VER 2 SCRIPT -------------------------------------------------------------------------------------------- -->

<script type="module" id="landing2">
import { useEffect, useRef } from "preact/hooks";
import ThemeToggle from "@/islands/ThemeToggle.tsx";

class SinuStar {
  private x_speed: number = 0;
  private y_rate: number = 0;
  private y_phase_offset: number = 0;
  private x_phase_offset: number = 0;
  private size: number = 0;
  private points: number = 0;
  private position: number = 0;

  constructor(
    x_speed: number,
    y_rate: number,
    x_phase: number,
    y_phase: number,
    points: number,
    position: number
  ) {
    this.x_speed = x_speed;
    this.y_rate = y_rate;
    this.x_phase_offset = x_phase;
    this.y_phase_offset = y_phase;
    this.size = 20;
    this.points = points;
    this.position = position;
  }

  draw(ctx: CanvasRenderingContext2D, t: number, col: string) {
    if (!ctx) return;
    const cnv = ctx.canvas;

    let starposa, starposb;

    // bottom wave
    if (this.position == 1) {
      starposa = cnv.height;
      starposb = cnv.height;
    }
    // top line
    else if (this.position == -1) {
      starposa = 0;
      starposb = 20;
    }

    const x_phase = (t * this.x_speed + this.x_phase_offset) % 1;
    const x_pos = (cnv.width + this.size) * x_phase - this.size;

    const y_phase = (t * this.y_rate * Math.PI * 2 + this.y_phase_offset) % 1;
    const y_sig = Math.sin(y_phase * Math.PI * 2);
    const y_wid = starposa / 3;
    const y_pos = starposb - this.size / 2 + y_sig * y_wid;

    //ctx.fillStyle = col;
    // ctx.fillRect(x_pos, y_pos, this.size, this.size);
    this.drawStar(
      ctx,
      x_pos + this.size / 2,
      y_pos + this.size / 2,
      this.points,
      this.size / 2,
      this.size / 4,
      col
    );
  }

  // draw star
  private drawStar(
    ctx: CanvasRenderingContext2D,
    cx: number,
    cy: number,
    points: number,
    r2: number,
    r1: number,
    col: string
  ) {
    ctx.beginPath();
    ctx.fillStyle = col;

    // start at the top point
    let step = Math.PI / points;

    for (let i = 0; i < points * 2; i++) {
      // if i / 2 = 0 draw outer radius point
      // if not draw inner radius point
      let radius = i % 2 === 0 ? r2 : r1;
      let x = cx + radius * Math.sin(i * step);
      let y = cy - radius * Math.cos(i * step);

      if (i === 0) {
        ctx.moveTo(x, y);
      } else {
        ctx.lineTo(x, y);
      }
    }

    ctx.closePath();
    ctx.fill();
  }
}

export default function LandingSketch() {
  const canvasRef = useRef<HTMLCanvasElement>(null);

  useEffect(() => {
    const cnv = canvasRef.current;
    if (!cnv) return;

    const resizeCanvas = () => {
      cnv.width = innerWidth;
      cnv.height = innerHeight;
    };

    resizeCanvas();
    globalThis.onresize = resizeCanvas;

    // Initialize animation
    const initAnimation = async () => {
      const ctx = cnv.getContext("2d");
      if (!ctx) return;

      // create stars
      const x_speed = 0.05;
      const y_rate = 0.01;

      // create regular stars
      const numStars = 36;
      // wave stars
      const starsA: SinuStar[] = [],
        starsB: SinuStar[] = [];
      // flat stars
      const starsC: SinuStar[] = [],
        starsD: SinuStar[] = [];
      for (let i = 0; i < numStars; i++) {
        const phase = i / numStars;
        const offset = (i % 3) / 3;
        const y_phase = phase + offset;
        const points = Math.floor(Math.random() * (9 - 4) + 4);
        // wave vars
        const positionA = 1;
        // line vars
        const positionB = -1,
        starsA.push(
          new SinuStar(x_speed, y_rate, phase, y_phase, points, positionA)
        );
        starsB.push(
          new SinuStar(x_speed, y_rate, phase, y_phase, points, positionB)
        );
      }

      const drawFrame = (ms: number) => {
        const bgColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-background")
          .trim();

        const fgColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-muted-foreground")
          .trim();

        const accentColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-landing")
          .trim();

        ctx.fillStyle = bgColour;
        ctx.fillRect(0, 0, cnv.width, cnv.height);

        const t = ms / 1000;

        // STARS --------------------------------------------------------------------
        starsA.forEach((s, i) => {
          const col = i === 0 ? accentColour : fgColour;
          s.draw(ctx, t, col);
        });

        starsB.forEach((s, i) => {
          const col = i === 0 ? accentColour : fgColour;
          s.draw(ctx, t, col);
        });

        // TEXT --------------------------------------------------------------------
        // center text
        ctx.fillStyle = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-foreground")
          .trim();
        ctx.font = `20px monospace`;
        ctx.textAlign = `center`;
        ctx.textBaseline = `middle`;
        ctx.font = `30px "prestige-elite-std"`;

        const text = `thou art arriv'd at sam's chronicle.`;
        ctx.fillText(text, cnv.width / 2, cnv.height / 2);

        // click to enter text
        ctx.fillStyle = fgColour;
        ctx.font = `20px "prestige-elite-std"`;
        const text2 = `click anywhere to enter.`;
        ctx.fillText(text2, cnv.width / 2, cnv.height - 40);

        requestAnimationFrame(drawFrame);
      };

      requestAnimationFrame(drawFrame);
    };

    document.fonts.ready.then(() => initAnimation());

    // Cleanup
    return () => {
      globalThis.onresize = null;
    };
  }, []);

  return (
    <div style={{ position: "relative", width: "100%", height: "100vh" }}>
      <canvas ref={canvasRef}></canvas>
      <div
        style={{
          position: "absolute",
          bottom: "1rem",
          right: "1rem",
          zIndex: 20,
        }}
      >
        <ThemeToggle />
      </div>
    </div>
  );
}
</script>

<!-- VER 1 SCRIPT -------------------------------------------------------------------------------------------- -->

<script type="module" id="landing1">
import { useEffect, useRef } from "preact/hooks";
import ThemeToggle from "@/islands/ThemeToggle.tsx";

class SinuStar {
  private x_speed: number = 0;
  private y_rate: number = 0;
  private y_phase_offset: number = 0;
  private x_phase_offset: number = 0;
  private size: number = 0;
  private points: number = 0;

  constructor(
    x_speed: number,
    y_rate: number,
    x_phase: number,
    y_phase: number,
    points: number
  ) {
    this.x_speed = x_speed;
    this.y_rate = y_rate;
    this.x_phase_offset = x_phase;
    this.y_phase_offset = y_phase;
    this.size = 20;
    this.points = points;
  }

  draw(ctx: CanvasRenderingContext2D, t: number, col: string) {
    if (!ctx) return;
    const cnv = ctx.canvas;

    const x_phase = (t * this.x_speed + this.x_phase_offset) % 1;
    const x_pos = (cnv.width + this.size) * x_phase - this.size;

    const y_phase = (t * this.y_rate * Math.PI * 2 + this.y_phase_offset) % 1;
    const y_sig = Math.sin(y_phase * Math.PI * 2);
    const y_wid = cnv.height / 3;
    const y_pos = cnv.height - this.size / 2 + y_sig * y_wid;

    //ctx.fillStyle = col;
    // ctx.fillRect(x_pos, y_pos, this.size, this.size);
    this.drawStar(
      ctx,
      x_pos + this.size / 2,
      y_pos + this.size / 2,
      this.points,
      this.size / 2,
      this.size / 4,
      col
    );
  }

  // draw star
  private drawStar(
    ctx: CanvasRenderingContext2D,
    cx: number,
    cy: number,
    points: number,
    r2: number,
    r1: number,
    col: string
  ) {
    ctx.beginPath();
    ctx.fillStyle = col;

    // start at the top point
    let step = Math.PI / points;

    for (let i = 0; i < points * 2; i++) {
      // if i / 2 = 0 draw outer radius point
      // if not draw inner radius point
      let radius = i % 2 === 0 ? r2 : r1;
      let x = cx + radius * Math.sin(i * step);
      let y = cy - radius * Math.cos(i * step);

      if (i === 0) {
        ctx.moveTo(x, y);
      } else {
        ctx.lineTo(x, y);
      }
    }

    ctx.closePath();
    ctx.fill();
  }
}

export default function LandingSketch() {
  const canvasRef = useRef<HTMLCanvasElement>(null);

  useEffect(() => {
    const cnv = canvasRef.current;
    if (!cnv) return;

    const resizeCanvas = () => {
      cnv.width = innerWidth;
      cnv.height = innerHeight;
    };

    resizeCanvas();
    globalThis.onresize = resizeCanvas;

    // Initialize animation
    const initAnimation = async () => {
      const ctx = cnv.getContext("2d");
      if (!ctx) return;

      // Create stars
      const x_speed = 0.05;
      const y_rate = 0.01;

      // Create regular stars
      const numStars = 36;
      // wave stars
      const starsA: SinuStar[] = [],
        starsB: SinuStar[] = [];
      // flat stars
      const starsC: SinuStar[] = [],
        starsD: SinuStar[] = [];
      for (let i = 0; i < numStars; i++) {
        const phase = i / numStars;
        const offset = (i % 3) / 3;
        const y_phase = phase + offset;
        const points = Math.floor(Math.random() * (9 - 4) + 4);
        // stars
        starsA.push(
          new SinuStar(x_speed, y_rate, phase, y_phase, points)
        );
      }

      const drawFrame = (ms: number) => {
        const bgColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-background")
          .trim();

        const fgColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-muted-foreground")
          .trim();

        const accentColour = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-landing")
          .trim();

        ctx.fillStyle = bgColour;
        ctx.fillRect(0, 0, cnv.width, cnv.height);

        const t = ms / 1000;

        // STARS --------------------------------------------------------------------
        starsA.forEach((s, i) => {
          const col = i === 0 ? accentColour : fgColour;
          s.draw(ctx, t, col);
        });

        // TEXT --------------------------------------------------------------------
        // center text
        ctx.fillStyle = getComputedStyle(document.documentElement)
          .getPropertyValue("--color-foreground")
          .trim();
        ctx.font = `20px monospace`;
        ctx.textAlign = `center`;
        ctx.textBaseline = `middle`;
        ctx.font = `30px "prestige-elite-std"`;

        const text = `thou art arriv'd at sam's chronicle.`;
        ctx.fillText(text, cnv.width / 2, cnv.height / 2);

        requestAnimationFrame(drawFrame);
      };

      requestAnimationFrame(drawFrame);
    };

    document.fonts.ready.then(() => initAnimation());

    // Cleanup
    return () => {
      globalThis.onresize = null;
    };
  }, []);

  return (
    <div style={{ position: "relative", width: "100%", height: "100vh" }}>
      <canvas ref={canvasRef}></canvas>
      <div
        style={{
          position: "absolute",
          bottom: "1rem",
          right: "1rem",
          zIndex: 20,
        }}
      >
        <ThemeToggle />
      </div>
    </div>
  );
}

</script>

 <!-- MARKDOWN LIGHT CSS --------------------------------------------------------------------------------------- -->

<script type="module" id="lightcss">
    .markdown-body {
  --color-canvas-default-transparent: #f9e8ce;
  --color-prettylights-syntax-comment: #8b949e;
  --color-prettylights-syntax-constant: #79c0ff;
  --color-prettylights-syntax-entity: #d2a8ff;
  --color-prettylights-syntax-storage-modifier-import: #c9d1d9;
  --color-prettylights-syntax-entity-tag: #7ee787;
  --color-prettylights-syntax-keyword: #ff7b72;
  --color-prettylights-syntax-string: #a5d6ff;
  --color-prettylights-syntax-variable: #ffa657;
  --color-prettylights-syntax-string-regexp: #7ee787;
  --color-prettylights-syntax-markup-deleted-text: #ffdcd7;
  --color-prettylights-syntax-markup-deleted-bg: #67060c;
  --color-prettylights-syntax-markup-inserted-text: #aff5b4;
  --color-prettylights-syntax-markup-inserted-bg: #033a16;
  --color-prettylights-syntax-constant-other-reference-link: #a5d6ff;
  --color-fg-default: #f356a7;
  --color-fg-muted: #f27794;
  --color-canvas-default: #f9e8ce;
  --color-canvas-subtle: #161b22;
  --color-border-default: #f27794;
  --color-border-muted: #f27794;
  --color-neutral-muted: rgba(110, 118, 129, 0.4);
  --color-accent-fg: #f27794;
  --color-accent-emphasis: #1f6feb;
  --color-danger-fg: #f85149;
}

</script>
